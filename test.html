<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Arrest Report</title>
  <link href="https://fonts.googleapis.com/css2?family=Rubik&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <style>
    * { font-family: 'Rubik', sans-serif; }
    body {
      background: transparent;
      padding: 30px;
      max-width: 750px;
      margin: auto;
      color: white;
    }
    .card {
      background: #2C2F33;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
      padding: 0;
      overflow: hidden;
      position: relative;
    }
    .header {
      background: #56585B;
      padding: 15px;
      text-align: center;
    }
    .header-title {
      font-size: 20px;
      font-weight: bold;
      color: white;
      margin: 0;
    }
    .header-subtitle {
      font-size: 15px;
      font-style: bold;
      color: #ccc;
      margin-top: 4px;
    }
    .section-title {
      font-weight: bold;
      font-size: 16px;
      background: #23272A;
      text-align: center;
      padding: 8px;
      margin-top: 20px;
      border-radius: 6px;
    }
    .row {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin: 15px;
    }
    .field-group {
      flex: 1;
      min-width: 150px;
      display: flex;
      flex-direction: column;
    }
    .field-group label {
      font-size: 13px;
      margin-bottom: 4px;
      color: #ccc;
      font-weight: bold;
      text-transform: uppercase;
    }
    input[type="text"],
    input[type="datetime-local"] {
      padding: 6px 10px;
      border: 1px solid #444;
      border-radius: 6px;
      font-size: 14px;
      background: #23272A;
      color: white;
    }
    .wide { width: 100%; }
    button {
      background-color: #3c78d8;
      color: white;
      border: none;
      padding: 12px;
      border-radius: 6px;
      font-size: 16px;
      cursor: pointer;
      transition: background 0.3s ease;
    }
    button:hover { background-color: #5187dc; }
    .tag-container {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      padding: 6px;
      border: 1px solid #444;
      border-radius: 6px;
      background: #23272A;
    }
    .tag-container input {
      border: none;
      flex: 1;
      min-width: 120px;
      padding: 6px 8px;
      font-size: 14px;
      background: transparent;
      color: white;
      outline: none;
    }
    .tag {
      background-color: #99aab5;
      color: #2C2F33;
      padding: 5px 10px;
      border-radius: 12px;
      font-size: 13px;
      display: flex;
      align-items: center;
    }
    .tag .remove {
      margin-left: 8px;
      color: #2C2F33;
      cursor: pointer;
      font-weight: bold;
    }
    .button-row {
      display: flex;
      gap: 10px;
      margin: 15px;
    }
    .clear-btn { background-color: #4f545c; color: #c0c0c0; }
    .clear-btn:hover { background-color: #5d626a; }
    .submit-btn { flex: 1; }
    #popup-overlay, #error-popup {
      position: absolute;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      background: #23272A;
      color: white;
      border-radius: 12px;
      padding: 25px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.6);
      display: none;
      z-index: 10;
      max-width: 90%;
      text-align: center;
    }
    #popup-overlay .header-title { color: #7289da; font-size: 18px; font-weight: bold; }
    #error-popup .header-title { color: #f04747; font-size: 18px; font-weight: bold; }
  </style>
</head>
<body>
<div id="capture-area" class="card">
  <img src="DISCORD_WEBHOOK_ARREST_REPORT.png" style="width: 100%; position: absolute; top: 0; left: 0; z-index: 0;">
  <div style="position: relative; z-index: 1; padding: 15px;">
    <input type="text" id="location" placeholder="Location">
    <input type="datetime-local" id="datetime">
    <input type="text" id="defendant" placeholder="Defendant">
    <input type="text" id="officer" placeholder="Officer">
    <input type="text" id="offenses" placeholder="Criminal Offense(s)">
  </div>
</div>
<div class="button-row">
  <button class="clear-btn" onclick="resetForm()">Clear</button>
  <button class="submit-btn" onclick="submitForm()">Submit</button>
</div>
<div id="popup-overlay">
  <div class="header-title">✅ Report Submitted</div>
  <div class="header-subtitle">Your Report Has Been Logged</div>
</div>
<div id="error-popup">
  <div class="header-title">⚠️ Submission Failed</div>
  <div class="header-subtitle">All Fields Are Required</div>
</div>
<script>
  function resetForm() {
    document.querySelectorAll('#capture-area input').forEach(el => el.value = '');
  }
  function showPopup() {
    document.getElementById('popup-overlay').style.display = 'block';
    setTimeout(() => document.getElementById('popup-overlay').style.display = 'none', 3000);
  }
  function showErrorPopup() {
    document.getElementById('error-popup').style.display = 'block';
    setTimeout(() => document.getElementById('error-popup').style.display = 'none', 3000);
  }
  async function submitForm() {
    const location = document.getElementById('location').value.trim();
    const datetime = document.getElementById('datetime').value.trim();
    const defendant = document.getElementById('defendant').value.trim();
    const officer = document.getElementById('officer').value.trim();
    const offenses = document.getElementById('offenses').value.trim();

    if (!location || !datetime || !defendant || !officer || !offenses) {
      showErrorPopup();
      return;
    }

    const webhookURL = 'https://discord.com/api/webhooks/1391047323395686430/nbQUOQ-VyewlU-HDHITbN_m9JNlM79Gp97ayaT9U2AkPix8wlD7jV8BrLqW2NqC_v2Ni';

    html2canvas(document.getElementById('capture-area')).then(canvas => {
      canvas.toBlob(blob => {
        const formData = new FormData();
        formData.append('file', blob, 'arrest-report.png');

        fetch(webhookURL, {
          method: 'POST',
          body: formData
        }).then(() => {
          showPopup();
          resetForm();
        }).catch(() => {
          alert('Failed to submit report.');
        });
      });
    });
  }
</script>
</body>
</html>
